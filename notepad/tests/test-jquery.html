<!DOCTYPE html>
<html>
<head>

<script src="../external/qunit.js" type="text/javascript"></script>
<link href="../external/qunit.css" type="text/css" rel="stylesheet" media="screen" />
<script src="../external/jsmockito-1.0.4.js" type="text/javascript"></script>
<script src="../external/jshamcrest-0.5.2.js" type="text/javascript"></script>
<script src="qunit-additions.js" type="text/javascript"></script>

<script src="../external/jquery-1.7.2.js" type="text/javascript"></script>
<script src="../external/jquery-ui.js" type="text/javascript"></script>

<script>
$(document).ready(function() {

    JsMockito.Integration.QUnit();
    JsHamcrest.Integration.QUnit();

        
    $.widget("notepad.aWidget", {

        options: {
          'anOption': 'a default value'
        },

        _setOption: function(key, value) {
            this._super(key, value);        // We have jquery-ui 1.9
        },
        _create: function() {
            console.log(this.options.anOption);
        }
    });

    test("when I set options", function() {
      var element = $('<p>').aWidget();
      var widget = element.data('aWidget');
      assertThat(widget.options['anOption'], equalTo('a default value'));
      assertThat(widget.option('anOption'), equalTo('a default value'));

      widget.option('anOption', "foo");
      assertThat(widget.options['anOption'], equalTo('foo'));
      assertThat(widget.option('anOption'), equalTo('foo'));
    });

    test("when I create a widget with initial options", function() {
      var element = $('<p>').aWidget({anOption: 'bar'});
      var widget = element.data('aWidget');
      assertThat(widget.options.anOption, equalTo('bar'));
      assertThat(widget.options['anOption'], equalTo('bar'));
      assertThat(widget.option('anOption'), equalTo('bar'));
    });


});
</script>

</head>
<body>
    <h1 id="qunit-header">QUnit example</h1>
    <h2 id="qunit-banner"></h2>
    <div id="qunit-testrunner-toolbar"></div>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
    <div id="qunit-fixture">test markup, will be hidden</div>
</body>

</html>